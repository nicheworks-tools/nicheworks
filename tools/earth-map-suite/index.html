<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Earth Map Suite – Storm Replay | NicheWorks</title>
  <meta name="description" content="Earth Map SuiteのStorm Replayモードで地図ビュー条件を整理し、確認メモを作成するツールです。" />
  <link rel="canonical" href="https://nicheworks.pages.dev/tools/earth-map-suite/" />

  <!-- OGP -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Earth Map Suite – Storm Replay | NicheWorks" />
  <meta property="og:description" content="Earth Map SuiteのStorm Replayモードで地図ビュー条件を整理し、確認メモを作成するツールです。" />
  <meta property="og:url" content="https://nicheworks.pages.dev/tools/earth-map-suite/" />
  <meta property="og:image" content="https://nicheworks.pages.dev/assets/ogp.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
  <link rel="apple-touch-icon" href="/assets/favicon.ico" />

  <!-- AdSense (MUST) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9879006623791275" crossorigin="anonymous"></script>

  <!-- Cloudflare Web Analytics (optional; keep token placeholder) -->
  <!--
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token":"YOUR_TOKEN_HERE"}'></script>
  -->

  <!-- JSON-LD (WebApplication) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Earth Map Suite – Storm Replay",
    "url": "https://nicheworks.pages.dev/tools/earth-map-suite/",
    "applicationCategory": "UtilityApplication",
    "description": "Storm Replayモードで地図ビューの条件を整理する簡易ツール。",
    "inLanguage": "ja",
    "operatingSystem": "All"
  }
  </script>

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="nw-header">
    <h1 class="nw-title" data-i18n="ja">Earth Map Suite（地図ビュー確認ツール）</h1>
    <h1 class="nw-title" data-i18n="en" style="display:none;">Earth Map Suite</h1>

    <p class="nw-lead" data-i18n="ja">地図ビューの条件を整理し、共有用の簡易メモを作るためのベースページ。</p>
    <p class="nw-lead" data-i18n="en" style="display:none;">A baseline page to organize map view conditions and share quick notes.</p>

    <div class="nw-lang-switch" aria-label="Language switch">
      <button type="button" data-lang="ja">JP</button> /
      <button type="button" data-lang="en">EN</button>
    </div>
  </header>

  <main class="nw-main">
    <div class="ad-slot ad-top">広告枠（準備中）</div>

    <section class="card">
      <div class="card-hd">
        <h2 class="card-title" data-i18n="ja">このツールでできること</h2>
        <h2 class="card-title" data-i18n="en" style="display:none;">What you can do</h2>
      </div>
      <div class="card-bd">
        <ul class="bullet" data-i18n="ja">
          <li>地図ビューの目的・対象地域を整理</li>
          <li>表示したいレイヤーや注釈をメモ化</li>
          <li>確認事項をチーム共有用に整形</li>
          <li>出力の想定結果をプレースホルダで確認</li>
        </ul>
        <ul class="bullet" data-i18n="en" style="display:none;">
          <li>Summarize the map view purpose and target area.</li>
          <li>List layers, annotations, and points of interest.</li>
          <li>Format a shareable checklist for teams.</li>
          <li>Preview the expected output as a placeholder note.</li>
        </ul>
      </div>
    </section>

    <div class="nw-note" data-i18n="ja">※ブラウザ内だけで動作します。入力内容は外部送信しません。</div>
    <div class="nw-note" data-i18n="en" style="display:none;">Runs locally in your browser. Your input is not sent anywhere.</div>

    <section class="card">
      <div class="card-hd">
        <h2 class="card-title" data-i18n="ja">入力パネル</h2>
        <h2 class="card-title" data-i18n="en" style="display:none;">Input panel</h2>
      </div>
      <div class="card-bd">
        <div class="field">
          <label class="label" for="modeSelect" data-i18n="ja">モード</label>
          <label class="label" for="modeSelect" data-i18n="en" style="display:none;">Mode</label>
          <select class="input" id="modeSelect">
            <option value="storm">storm</option>
            <option value="compare">compare</option>
            <option value="card">card</option>
          </select>
          <p class="hint" id="modeHint" data-i18n="ja">storm: 単一条件の確認 / compare: 条件比較 / card: カード表示</p>
          <p class="hint" id="modeHintEn" data-i18n="en" style="display:none;">storm: single condition / compare: compare conditions / card: card view</p>
        </div>
        <div class="field">
          <label class="label" for="bboxInput" data-i18n="ja">BBox（緯度経度）</label>
          <label class="label" for="bboxInput" data-i18n="en" style="display:none;">BBox (lat/long)</label>
          <input class="input" id="bboxInput" type="text" placeholder="例：139.60,35.50,139.95,35.80" />
        </div>
        <div class="field">
          <label class="label" for="startInput" data-i18n="ja">開始日</label>
          <label class="label" for="startInput" data-i18n="en" style="display:none;">Start date</label>
          <input class="input" id="startInput" type="date" />
          <p class="hint compare-only" data-i18n="ja" hidden>compareモード時は期間Aの開始日</p>
          <p class="hint compare-only" data-i18n="en" hidden>Compare mode: period A start date</p>
        </div>
        <div class="field">
          <label class="label" for="endInput" data-i18n="ja">終了日</label>
          <label class="label" for="endInput" data-i18n="en" style="display:none;">End date</label>
          <input class="input" id="endInput" type="date" />
          <p class="hint compare-only" data-i18n="ja" hidden>compareモード時は期間Aの終了日</p>
          <p class="hint compare-only" data-i18n="en" hidden>Compare mode: period A end date</p>
        </div>
        <div class="field compare-only" hidden>
          <label class="label" for="startInputB" data-i18n="ja">期間B 開始日</label>
          <label class="label" for="startInputB" data-i18n="en" style="display:none;">Period B start date</label>
          <input class="input" id="startInputB" type="date" />
        </div>
        <div class="field compare-only" hidden>
          <label class="label" for="endInputB" data-i18n="ja">期間B 終了日</label>
          <label class="label" for="endInputB" data-i18n="en" style="display:none;">Period B end date</label>
          <input class="input" id="endInputB" type="date" />
        </div>
        <div class="field">
          <label class="label" for="presetInput" data-i18n="ja">プリセット</label>
          <label class="label" for="presetInput" data-i18n="en" style="display:none;">Preset</label>
          <input class="input" id="presetInput" type="text" placeholder="例：low" />
        </div>
        <div class="field">
          <label class="label" for="framesInput" data-i18n="ja">フレーム数（stormのみ）</label>
          <label class="label" for="framesInput" data-i18n="en" style="display:none;">Frames (storm only)</label>
          <input class="input" id="framesInput" type="number" min="1" placeholder="例：24" />
          <p class="hint" data-i18n="ja">stormモード時は必須。48を超える場合は自動的に間引きます。</p>
          <p class="hint" data-i18n="en" style="display:none;">Required for storm mode. Over 48 frames will be thinned automatically.</p>
        </div>
        <div class="field">
          <label class="label" for="focusArea" data-i18n="ja">対象エリア</label>
          <label class="label" for="focusArea" data-i18n="en" style="display:none;">Target area</label>
          <input class="input" id="focusArea" type="text" placeholder="例：東京23区・沿岸部" />
        </div>
        <div class="field">
          <label class="label" for="layers" data-i18n="ja">確認したいレイヤー</label>
          <label class="label" for="layers" data-i18n="en" style="display:none;">Layers to verify</label>
          <textarea class="textarea" id="layers" placeholder="例：地形 / 交通 / 標高 / 避難所"></textarea>
        </div>
        <div class="field">
          <label class="label" for="notes" data-i18n="ja">補足メモ</label>
          <label class="label" for="notes" data-i18n="en" style="display:none;">Notes</label>
          <textarea class="textarea" id="notes" placeholder="例：夜間モードで視認性を確認"></textarea>
        </div>
        <div class="row">
          <button class="btn" type="button" data-example-mode="storm" data-i18n="ja">storm例</button>
          <button class="btn" type="button" data-example-mode="compare" data-i18n="ja">compare例</button>
          <button class="btn" type="button" data-example-mode="card" data-i18n="ja">card例</button>
          <button class="btn" type="button" data-example-mode="storm" data-i18n="en" style="display:none;">Storm example</button>
          <button class="btn" type="button" data-example-mode="compare" data-i18n="en" style="display:none;">Compare example</button>
          <button class="btn" type="button" data-example-mode="card" data-i18n="en" style="display:none;">Card example</button>
          <button class="btn primary" type="button" id="runBtn" data-i18n="ja">プレビューを作成</button>
          <button class="btn primary" type="button" id="runBtnEn" data-i18n="en" style="display:none;">Generate preview</button>
        </div>
        <p class="hint" data-i18n="ja"><a class="nw-link" href="./usage.html">使い方はこちら</a></p>
        <p class="hint" data-i18n="en" style="display:none;"><a class="nw-link" href="./usage-en.html">See usage guide</a></p>
      </div>
    </section>

    <section class="card">
      <div class="card-hd">
        <h2 class="card-title" data-i18n="ja">結果プレビュー</h2>
        <h2 class="card-title" data-i18n="en" style="display:none;">Result preview</h2>
      </div>
      <div class="card-bd">
        <div class="out" id="errorOutput" role="alert" aria-live="assertive" hidden></div>
        <div class="out" id="resultOutput" aria-live="polite"></div>
        <div class="compare-output" id="compareOutput" hidden>
          <div class="compare-summary">
            <h3 class="compare-title" data-i18n="ja">compare結果サマリー（降水量・参考値）</h3>
            <h3 class="compare-title" data-i18n="en" style="display:none;">Compare summary (precipitation, reference only)</h3>
            <p class="compare-note" data-i18n="ja">本結果はダミーのプレースホルダです。実測値ではありません。</p>
            <p class="compare-note" data-i18n="en" style="display:none;">These values are synthetic placeholders and not observed data.</p>
            <dl class="compare-metrics" id="compareMetrics"></dl>
          </div>
          <div class="compare-cards">
            <div class="compare-card">
              <div class="compare-card-title" data-i18n="ja">期間A（mm相当）</div>
              <div class="compare-card-title" data-i18n="en" style="display:none;">Period A (mm equivalent)</div>
              <canvas id="compareCanvasA" width="320" height="200" aria-label="Compare period A output"></canvas>
            </div>
            <div class="compare-card">
              <div class="compare-card-title" data-i18n="ja">期間B（mm相当）</div>
              <div class="compare-card-title" data-i18n="en" style="display:none;">Period B (mm equivalent)</div>
              <canvas id="compareCanvasB" width="320" height="200" aria-label="Compare period B output"></canvas>
            </div>
            <div class="compare-card">
              <div class="compare-card-title" data-i18n="ja">差分 (A - B, mm相当)</div>
              <div class="compare-card-title" data-i18n="en" style="display:none;">Diff (A - B, mm equivalent)</div>
              <canvas id="compareCanvasDiff" width="320" height="200" aria-label="Compare diff output"></canvas>
            </div>
          </div>
          <div class="compare-actions">
            <button class="btn" type="button" id="downloadCompareA" data-i18n="ja">期間A PNG</button>
            <button class="btn" type="button" id="downloadCompareAEn" data-i18n="en" style="display:none;">Download A PNG</button>
            <button class="btn" type="button" id="downloadCompareB" data-i18n="ja">期間B PNG</button>
            <button class="btn" type="button" id="downloadCompareBEn" data-i18n="en" style="display:none;">Download B PNG</button>
            <button class="btn" type="button" id="downloadCompareDiff" data-i18n="ja">差分 PNG</button>
            <button class="btn" type="button" id="downloadCompareDiffEn" data-i18n="en" style="display:none;">Download diff PNG</button>
            <button class="btn" type="button" id="downloadCompareCsv" data-i18n="ja">compare CSV</button>
            <button class="btn" type="button" id="downloadCompareCsvEn" data-i18n="en" style="display:none;">Download compare CSV</button>
          </div>
        </div>
        <div class="storm-replay" id="stormReplay" hidden>
          <div class="storm-status" id="stormStatus" role="status" aria-live="polite"></div>
          <div class="storm-toolbar">
            <div class="storm-controls">
              <button class="btn" type="button" id="stormPrev" aria-label="Previous frame">◀</button>
              <input class="storm-slider" id="stormSlider" type="range" min="0" max="0" value="0" step="1" />
              <button class="btn" type="button" id="stormNext" aria-label="Next frame">▶</button>
            </div>
            <div class="storm-meta">
              <span class="storm-label" data-i18n="ja">日時:</span>
              <span class="storm-label" data-i18n="en" style="display:none;">Timestamp:</span>
              <strong id="stormTimestamp">-</strong>
            </div>
            <label class="storm-toggle">
              <input type="checkbox" id="stormCumulativeToggle" checked />
              <span data-i18n="ja">累積表示</span>
              <span data-i18n="en" style="display:none;">Show cumulative</span>
            </label>
          </div>
          <div class="storm-canvases">
            <div class="storm-panel">
              <div class="storm-panel-title" data-i18n="ja">現在フレーム</div>
              <div class="storm-panel-title" data-i18n="en" style="display:none;">Current frame</div>
              <canvas id="stormFrameCanvas" width="320" height="200" aria-label="Storm frame visualization"></canvas>
            </div>
            <div class="storm-panel" id="stormCumulativePanel">
              <div class="storm-panel-title" data-i18n="ja">累積フレーム</div>
              <div class="storm-panel-title" data-i18n="en" style="display:none;">Cumulative frame</div>
              <canvas id="stormCumulativeCanvas" width="320" height="200" aria-label="Storm cumulative visualization"></canvas>
            </div>
          </div>
          <div class="storm-actions">
            <button class="btn" type="button" id="downloadFramePng" data-i18n="ja">現在フレームPNG</button>
            <button class="btn" type="button" id="downloadFramePngEn" data-i18n="en" style="display:none;">Download frame PNG</button>
            <button class="btn" type="button" id="downloadCumulativePng" data-i18n="ja">累積PNG</button>
            <button class="btn" type="button" id="downloadCumulativePngEn" data-i18n="en" style="display:none;">Download cumulative PNG</button>
            <button class="btn" type="button" id="downloadCsv" data-i18n="ja">CSVダウンロード</button>
            <button class="btn" type="button" id="downloadCsvEn" data-i18n="en" style="display:none;">Download CSV</button>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-hd">
        <h2 class="card-title" data-i18n="ja">制限事項</h2>
        <h2 class="card-title" data-i18n="en" style="display:none;">Limits</h2>
      </div>
      <div class="card-bd">
        <ul class="bullet" data-i18n="ja">
          <li>実際の地図表示は行いません。</li>
          <li>共有や保存はコピー＆ペーストで行ってください。</li>
          <li>入力内容はブラウザにのみ残ります。</li>
        </ul>
        <ul class="bullet" data-i18n="en" style="display:none;">
          <li>No live map rendering is included.</li>
          <li>Share or save by copying the preview text.</li>
          <li>Inputs stay only in your browser.</li>
        </ul>
      </div>
    </section>

    <section class="card">
      <div class="card-hd">
        <h2 class="card-title" data-i18n="ja">FAQ（短縮版）</h2>
        <h2 class="card-title" data-i18n="en" style="display:none;">FAQ (short)</h2>
      </div>
      <div class="card-bd">
        <dl class="faq" data-i18n="ja">
          <dt>Q. どんな用途に使えますか？</dt>
          <dd>A. 地図調査の事前共有メモやレビュー依頼の下書きに使えます。</dd>
          <dt>Q. データは保存されますか？</dt>
          <dd>A. 保存されません。必要なら手動でコピーしてください。</dd>
        </dl>
        <dl class="faq" data-i18n="en" style="display:none;">
          <dt>Q. What is this for?</dt>
          <dd>A. It helps draft notes for map review or planning discussions.</dd>
          <dt>Q. Is my data saved?</dt>
          <dd>A. No. Please copy anything you want to keep.</dd>
        </dl>
      </div>
    </section>

    <div class="ad-slot ad-bottom">広告枠（準備中）</div>

    <div class="nw-donate">
      <h3 class="nw-other-title" data-i18n="ja">サポート（準備中）</h3>
      <h3 class="nw-other-title" data-i18n="en" style="display:none;">Support (coming soon)</h3>
      <p class="nw-donate-text" data-i18n="ja">開発継続のためのご支援ページを準備中です。</p>
      <p class="nw-donate-text" data-i18n="en" style="display:none;">A support page for ongoing development is in preparation.</p>
      <div class="nw-donate-links">
        <a href="https://example.com/support" target="_blank" rel="noopener" data-i18n="ja">支援リンク（準備中）</a>
        <a href="https://example.com/support" target="_blank" rel="noopener" data-i18n="en" style="display:none;">Support link (coming soon)</a>
      </div>
    </div>

    <section class="nw-other">
      <h3 class="nw-other-title" data-i18n="ja">関連ツール</h3>
      <h3 class="nw-other-title" data-i18n="en" style="display:none;">Related tools</h3>
      <div class="nw-other-links" data-i18n="ja">
        <a href="/tools/earth-timeseries/">Earth Timeseries（準備中）</a>
        <a href="/tools/earth-alerts/">Earth Alerts（準備中）</a>
      </div>
      <div class="nw-other-links" data-i18n="en" style="display:none;">
        <a href="/tools/earth-timeseries/">Earth Timeseries (coming soon)</a>
        <a href="/tools/earth-alerts/">Earth Alerts (coming soon)</a>
      </div>
    </section>
  </main>

  <footer class="nw-footer">
    <p class="nw-footer-line">© NicheWorks — Small Web Tools for Boring Tasks</p>
    <p class="nw-footer-line">Data source: JAXA/EORC（Dataset: <span data-dataset-name>未設定</span>）</p>
    <p class="nw-footer-line">License: <span data-dataset-license>TBD</span></p>
    <p class="nw-footer-line">免責：データの正確性は保証しません。必ず公式情報をご確認ください。</p>
    <p class="nw-footer-line">
      <a href="https://nicheworks.pages.dev/" target="_blank" rel="noopener">nicheworks.pages.dev</a>
    </p>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
