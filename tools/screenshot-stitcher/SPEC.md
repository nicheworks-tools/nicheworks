# tools/screenshot-stitcher/SPEC.md
# IMG-1 Screenshot Stitcher（スクショ縦結合）完成仕様 v1.0

## 1. 目的
手順説明・問い合わせ・証跡共有で頻発する「複数スクショを1枚に縦結合」を、**ブラウザ完結（外部送信なし）**で業務品質に仕上げる。

## 2. 共通仕様（NicheWorks v3）準拠（必須）
- **白背景が基本（ダークモードは非対応）**
- ツールヘッダーは **ロゴ表示しない**（タイトル＋1行説明のみ）
- ツール横断の共通ナビは設置しない（置くなら **Home 1リンクのみ**）
- 広告枠：`ad-top` 必須、`ad-bottom` 推奨（短いページでも置く）
- 寄付導線：**最大2箇所まで**、**OFUSE + Ko-fi を並列**、広告の近くに置かない
  - https://ofuse.me/nicheworks
  - https://ko-fi.com/nicheworks
- GA4：全ページ `<head>` に固定コード（削除/変更禁止）
- AdSense：全ページ `<head>` に固定 script（削除/変更禁止）
- フッターは **共通仕様の3行のみ**（Privacy/Terms/Credits/Contact など勝手に追加しない）

## 3. 画面構成（完成版）
### 3.1 Header
- タイトル（JP/EN切替対応）
- 1行説明（JP/EN切替対応）
- 任意：Homeリンク（必要な場合のみ）

### 3.2 Main
- `ad-top`（必須）
- （寄付導線①：ヘッダー直下 or 操作直下のどちらか。最大2箇所ルール）
- 操作パネル（PC/モバイルで崩れない）
  - 画像追加（D&D / クリック）PNG/JPG/WebP
  - 画像リスト（サムネ、解像度、並べ替え）
    - ↑↓ボタン（必須）
    - PCはドラッグ並べ替え（任意・対応する）
  - 幅揃えモード
    - (A) 最大幅に合わせる（デフォルト）
    - (B) 指定幅（px）
    - (C) 最小幅に合わせる（任意）
  - 余白トリム（簡易）
    - ON/OFF
    - 検出閾値（0〜40程度）
    - 上下のみ（左右は任意）
  - 画像間の余白（0〜200px）
  - 背景色（白/透明）
  - 出力形式：PNG（推奨・MVP固定）
- プレビュー領域
  - 結合プレビュー（canvas）
  - 高さが極端に長い場合の警告（例：20,000px超）
- Export
  - Download PNG
  - （完成版追加）分割出力：指定枚数/指定pxで複数PNG（ZIPはやらないならここは削除可）
- `ad-bottom`（推奨）
- （寄付導線②：フッター直前。①を置いたら②は状況で）

### 3.3 Footer（共通仕様どおり）
- © NicheWorks — Small Web Tools for Boring Tasks
- 免責文（必要なら）
- nicheworks.app へのリンク

## 4. 機能要件（完成版）
### 4.1 画像入力
- 複数追加、順序保持、削除
- 取り込み時にメタ情報表示（w×h、ファイル名）
- 画像は **外部送信しない**（File API / canvasのみ）

### 4.2 並べ替え
- ↑↓で確実に動く（必須）
- PC drag-sort（任意、失敗しても↑↓で完結する）

### 4.3 幅揃え
- 各画像を同一幅にスケーリングして縦結合
- 補間：デフォルト on（品質優先）
- リサイズ後高さの計算ミス無し（ピクセル単位で整合）

### 4.4 余白トリム（簡易）
- “単色に近い連続帯” を上/下から走査し、しきい値以内なら削る
- ON/OFF
- 画像ごとトリム結果が変でも破綻しない（最低1pxは残す）

### 4.5 プレビュー & 出力
- プレビューは結合結果をcanvasで表示
- 出力はPNG（download）
- 巨大画像対策
  - 高さが上限を超えると警告＆分割出力を推奨（または自動分割）

## 5. 非機能（業務用）
- 操作が軽い（サムネ生成、プレビューは必要時のみ再生成）
- 失敗しても落ちない（try/catchでUI継続）
- 入力データはページ閉じたら破棄（保存なし）

## 6. 収益前提（ワンタイム $2.99）
- “有料化は将来” ではなく、完成版に **購入導線（unlock）** を実装可能な設計
- ただしUIは共通仕様を崩さない（大げさなLP演出禁止）
- 無料制限案（例）
  - 無料：最大10枚/最大出力高さ 12,000px
  - Pro：無制限（現実上のブラウザ限界まで）+ 分割出力など
※ 実装の詳細は PLAN.md に記載
